# System Prompt 迭代变更日志

## [6.0] - 2026-01-17 (Stability)

### 变更
- 深化 `<final>` 末尾约束：serp_queries 必须在 `<final>` 内且三行无缩进
- 禁止 ``` 代码块/复述模板，避免重复标签导致解析失败
- 回归：xai 3/3、deepseek 3/3、claude-sonnet 3/3（runs=3, turns=1）

---

## [5.0] - 2026-01-17 (Production)

### 变更
- 最终生产版本，字符数 1026 bytes
- 压缩率 78%（基线 4627 → 1026）
- grok 模型 100% 通过率（10/10，runs=5, turns=2）

### 结构
- 必须输出的完整结构示例前置
- 强制规则精简为 5 条核心要求
- 标签规则、内容规则、禁止事项分块

---

## [4.0] - 2026-01-17

### 变更
- 统一版本，字符数 1261 bytes
- 使用中文描述，提高可读性
- grok 5/5 PASS，gemini-pro 4/5 PASS

---

## [3.1] - 2026-01-17

### 变更
- 强化约束版本，字符数 1402 bytes
- 明确"必须输出"的结构要求
- grok/gemini-pro 均 3/3 PASS

---

## [3.0] - 2026-01-17

### 变更
- 结构优化版本，字符数 1902 bytes
- 使用代码块展示结构顺序
- 分节组织：标签白名单、结构顺序、关键约束

---

## [2.0] - 2026-01-17

### 变更
- 首次压缩版本，字符数 1891 bytes
- 去除冗余说明和重复约束
- 压缩率 59%，但稳定性略有下降

---

## [1.0] - 2026-01-17 (Baseline)

### 内容
- 基线版本，字符数 4627 bytes
- 从 `assets/prompts/serp_prompt.md` 复制
- 包含完整的 ThinkingML v4.5 规范

---

## 迭代总结

| 版本 | 字符数 | 压缩率 | 主要改进 |
|------|--------|--------|----------|
| v1.0 | 4627 | - | 基线 |
| v2.0 | 1891 | 59% | 去冗余 |
| v3.0 | 1902 | 59% | 结构化 |
| v3.1 | 1402 | 70% | 强化约束 |
| v4.0 | 1261 | 73% | 统一简化 |
| v5.0 | 1026 | 78% | 生产就绪 |
| v6.0 | 1500 | 68% | 多模型稳定 |
