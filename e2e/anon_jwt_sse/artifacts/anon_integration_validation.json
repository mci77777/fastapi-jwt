{
  "timestamp": "2025-12-24T11:33:03.228025+00:00",
  "tests": [
    {
      "test_name": "数据库表检查",
      "passed": false,
      "timestamp": "2025-12-24T11:33:03.238380+00:00",
      "details": {
        "error": "connection failed: connection to server at \"127.0.0.1\", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?"
      }
    },
    {
      "test_name": "RLS策略检查",
      "passed": false,
      "timestamp": "2025-12-24T11:33:03.238638+00:00",
      "details": {
        "error": "connection failed: connection to server at \"127.0.0.1\", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?"
      }
    },
    {
      "test_name": "无token JWT验证",
      "passed": false,
      "timestamp": "2025-12-24T11:33:03.240618+00:00",
      "details": {
        "error": "Cannot connect to host localhost:9999 ssl:default [Connect call failed ('127.0.0.1', 9999)]"
      }
    },
    {
      "test_name": "限流机制测试",
      "passed": false,
      "timestamp": "2025-12-24T11:33:03.241118+00:00",
      "details": {
        "total_requests": 10,
        "status_codes": [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        "has_429": false,
        "has_consistent_auth_rejection": false,
        "explanation": "未检测到限流",
        "responses": [
          {
            "error": "Cannot connect to host localhost:9999 ssl:default [Connect call failed ('127.0.0.1', 9999)]"
          },
          {
            "error": "Cannot connect to host localhost:9999 ssl:default [Connect call failed ('127.0.0.1', 9999)]"
          },
          {
            "error": "Cannot connect to host localhost:9999 ssl:default [Connect call failed ('127.0.0.1', 9999)]"
          }
        ]
      }
    },
    {
      "test_name": "无效token验证",
      "passed": false,
      "timestamp": "2025-12-24T11:33:03.241733+00:00",
      "details": {
        "invalid_token_1": {
          "token": "invalid.token.here...",
          "error": "Cannot connect to host localhost:9999 ssl:default [Connect call failed ('127.0.0.1', 9999)]",
          "success": false
        },
        "invalid_token_2": {
          "token": "eyJhbGciOiJIUzI1NiIs...",
          "error": "Cannot connect to host localhost:9999 ssl:default [Connect call failed ('127.0.0.1', 9999)]",
          "success": false
        },
        "invalid_token_3": {
          "token": "Bearer invalid-token...",
          "error": "Cannot connect to host localhost:9999 ssl:default [Connect call failed ('127.0.0.1', 9999)]",
          "success": false
        }
      }
    },
    {
      "test_name": "API健康检查",
      "passed": false,
      "timestamp": "2025-12-24T11:33:03.242127+00:00",
      "details": {
        "error": "所有健康检查端点都无法访问",
        "tested_endpoints": [
          "http://localhost:9999/health",
          "http://localhost:9999/",
          "http://localhost:9999/docs",
          "http://localhost:9999/api/v1/"
        ]
      }
    }
  ],
  "summary": {
    "total": 6,
    "passed": 0,
    "failed": 6,
    "errors": [
      "数据库表检查: connection failed: connection to server at \"127.0.0.1\", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?",
      "RLS策略检查: connection failed: connection to server at \"127.0.0.1\", port 5432 failed: Connection refused\n\tIs the server running on that host and accepting TCP/IP connections?",
      "无token JWT验证: Cannot connect to host localhost:9999 ssl:default [Connect call failed ('127.0.0.1', 9999)]",
      "API健康检查: 所有健康检查端点都无法访问"
    ]
  }
}