ID,Title,Description,Acceptance,Test_Method,Tools,Dev_Status,Review1_Status,Regression_Status,Files,Dependencies,Notes
A1,审计供应商调用点并固化SSOT,"盘点全项目所有供应商直连调用点/影子状态/持久化落点/自动seed来源，定义并落地唯一链路：endpoints→mapping→(JWT&models SSOT)","输出调用点清单；对外只暴露 mapped models；禁止 JWT/测试/脚本绕过 mapping","rg+codebase-retrieval 清单 + make test 冒烟","mcp__feedback__codebase-retrieval;functions.exec_command;functions.apply_patch",DONE,TODO,TODO,"app/services/*;app/api/v1/*;tests/*;scripts/*",AIConfigService;ModelMappingService;AIService,"DONE：输出调用点清单 `docs/dashboard-refactor/AI_SUPPLIER_SSOT_CALLPOINTS.md`；移除 `JWTTestService` 与 `/llm/tests/(dialog|load|runs)` 旁路；脚本 `scripts/testing/api/test_api.py` 默认只读；Dashboard 菜单/权限收敛到 admin；make test=118 passed, 2 skipped"
A2,持久化与删除治理,"修复配置无法持久化/模型目录无法删除/删除后回弹/测试模型无限新增：统一落盘到data(volume)或SQLite，删除链路可用且不自动重建","重启/重建容器后配置不丢；删除 endpoint/mapping 后不再出现且不回弹；不会无限生成测试模型","新增微E2E(持久化+删除) + make test + Docker重启后healthz","mcp__feedback__codebase-retrieval;functions.exec_command;functions.apply_patch",DONE,TODO,TODO,"app/core/application.py;app/services/ai_config_service.py;app/services/model_mapping_service.py;docker-compose.yml;tests/*",SQLiteManager;runtime storage dir;Docker volume,"DONE：关闭生产环境 auto-seed（仅 `ALLOW_TEST_AI_ENDPOINTS=true` 允许）；legacy→data 迁移加一次性 marker 防回弹；新增微E2E `tests/test_persistence_delete_micro_e2e.py` 覆盖“持久化+删除+重启不回弹+global:global 不复活”；make test=119 passed, 2 skipped"
A3,check-all超时修复(异步202),"`GET /api/v1/llm/models/check-all` 改为 202 立即返回并触发后台批量探针刷新；增加并发/超时控制与可观测状态，前端轮询/刷新展示","请求不再超时；后台刷新能更新端点状态；UI可见最新状态","接口契约测试 + E2E刷新流程 + make test","mcp__feedback__codebase-retrieval;functions.exec_command;functions.apply_patch",DONE,TODO,TODO,"app/api/v1/llm_models.py;app/services/monitor_service.py;app/services/ai_config_service.py;web/src/views/ai/*",EndpointMonitor;AIConfigService;前端轮询策略,采纳方案：202触发后台刷新；commit=377f7ea
A4,前端路由别名(/ai/catalog→AI Tab),"将 `https://web.gymbro.cloud/ai/catalog` 调整为 AI 页 Tab 的路由别名，避免歧义；保留旧地址但复用同一页面状态","访问/ai/catalog与/ai(对应Tab)一致；无歧义入口；导航/面包屑一致","pnpm build + 路由E2E/手测清单","mcp__feedback__codebase-retrieval;functions.exec_command;functions.apply_patch",DONE,TODO,TODO,"web/src/router/*;web/src/views/ai/*",Vue Router;Naive UI,确认：仅做路由别名(不做301/302)；commits=377f7ea 18d0381
A5,AI供应商页面简化与权限边界,"简化AI供应商(endpoints)页面：只保留必要字段/动作；映射(models)作为SSOT入口；endpoints仅admin可写，普通用户只读mapped models","页面结构清晰；不会引导用户直连供应商；权限边界一致","pnpm build + 关键交互冒烟 + make test","mcp__feedback__codebase-retrieval;functions.exec_command;functions.apply_patch",DONE,TODO,TODO,"web/src/views/ai/*;app/api/v1/llm_models.py",SSOT contracts;admin gate,"DONE：`/system/ai` 标题改为「AI 供应商（Endpoints）」并增加 SSOT 提示/直达「模型映射」入口；Mail API Key 配置从供应商页移到 `/ai/jwt`，且会随 create-mail-user 请求透传；pnpm build 通过"
A6,过滤 embeddings-only 模型,"从供应商 /models 混入的 embedding 模型中剔除：映射候选与对外 app models 都不应包含 embeddings-only","App scopes 的 candidates/default_model 不包含 embeddings；纯 embeddings mapping 不出现在列表","make test（含微E2E）+ Docker healthz","mcp__feedback__codebase-retrieval;functions.exec_command;functions.apply_patch",DONE,TODO,TODO,"app/services/ai_model_rules.py;app/services/ai_service.py;app/services/model_mapping_service.py;tests/test_ai_model_rules.py;tests/test_llm_app_models.py",ModelMappingService;AIService,"DONE：新增 SSOT 规则 `looks_like_embedding_model()` 并在映射解析/白名单输出/fallback/seed 全链路过滤；make test=134 passed, 2 skipped；Docker healthz=200；commit=29bb668"
