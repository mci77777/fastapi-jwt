ID,Title,Description,Acceptance,Test_Method,Tools,Dev_Status,Review1_Status,Regression_Status,Files,Dependencies,Notes
A1,后端：tenant→mapping + SQLite 落库,"把模型映射 fallback 存储从 `AI_RUNTIME_STORAGE_DIR/model_mappings.json` 迁移到 SQLite（新增 `llm_model_mappings` 表）；`scope_type=tenant` 语义更名为 `mapping`，并提供 legacy alias（解析/CRUD 兼容 tenant 前缀）；启动期一次性导入 legacy JSON（tenant→mapping）。","1) `/api/v1/llm/model-groups` 可读写 `mapping:*` 并持久化；2) 解析 `tenant:*` 仍可正常路由（兼容存量）；3) 删除后重启不回弹。","`PYTHONPATH=. .venv/bin/python -m pytest -q tests`（包含相关微E2E/路由用例）","functions.exec_command;functions.apply_patch",DONE,TODO,DONE,"app/db/sqlite_manager.py;app/core/application.py;app/services/model_mapping_service.py;app/services/ai_service.py;app/services/llm_model_registry.py;app/api/v1/llm_mappings.py",SQLiteManager;AI_RUNTIME_STORAGE_DIR,"DONE：SQLite 表落地 + legacy JSON 一次性导入；tenant:* 输入可解析；pytest 覆盖通过。"
A2,前端：映射页消歧与字段重构,"重构“模型映射”页面与 Dashboard 映射卡片：把 `tenant` 文案与值统一更名为 `mapping`；表单字段明确为“映射名(scope_key)+显示名(name)+选择 API(endpoint)+默认/候选模型”；保存 `metadata.preferred_endpoint_id` 并回显。","1) UI 中不再出现 Tenant（租户）歧义；2) 选择端点后可快速导入候选模型；3) 保存后刷新仍能看到 endpoint 选择信息。","`cd web && pnpm build`（可选）+ 通过手动点选保存（本地启动）","functions.exec_command;functions.apply_patch",DONE,TODO,DONE,"web/src/views/ai/model-suite/mapping/index.vue;web/src/components/dashboard/ModelMappingCard.vue;web/src/store/modules/aiModelSuite.js",后端 A1,"DONE：映射名改为 mapping；支持绑定 API 并写入 metadata.preferred_endpoint_id；npm build 通过。"
A3,回归：测试/文档/镜像,"更新 tests 与文档口径：把 tenant 改为 mapping；补齐 `docs/features/model_management/implementation.md` 与相关 SSE 文档；完成 E2E 逐模型结构校验；提交后 docker compose rebuild。","1) pytest 全绿；2) `.venv/bin/python scripts/monitoring/local_mock_ai_conversation_e2e.py` exit=0；3) docs 口径一致；4) docker build 通过。","`PYTHONPATH=. .venv/bin/python -m pytest -q tests` + `.venv/bin/python scripts/monitoring/local_mock_ai_conversation_e2e.py` + `docker compose up -d --build app`","functions.exec_command;functions.apply_patch",DONE,TODO,DONE,"tests/*;docs/features/model_management/implementation.md;docs/sse/2026-01-07/*.md;Dockerfile;docker-compose*.yml",A1,A2,"DONE：pytest=176 passed；E2E=local_mock_ai_conversation_e2e.py exit=0；web build=npm run build；docker compose=up -d --build app；healthz=200。"
