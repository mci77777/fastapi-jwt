ID,Title,Description,Acceptance,Test_Method,Tools,Dev_Status,Review1_Status,Regression_Status,Files,Dependencies,Notes
A1,后端：切换 App 默认输出为 RAW 透明转发,将 App 未传 `result_mode` 时的默认值从 `xml_plaintext` 调整为 `raw_passthrough`；SSOT 仍为 `llm_app_settings.default_result_mode` + `/api/v1/llm/app/config`。,未配置且请求未传 `result_mode` 时实际进入 `raw_passthrough`；传入 `result_mode` 时保持覆盖逻辑不变；无影子状态。,pytest 回归 + 手动创建消息订阅 SSE（观察事件类型 upstream_raw/content_delta）。,feedback:codebase-retrieval;functions:apply_patch;functions:shell_command,DONE,TODO,DONE,app/api/v1/messages.py;app/api/v1/llm_models.py,依赖现有 llm_app_settings 与 llm/app/config API,DONE：默认值改为 raw_passthrough；make test 通过。
A2,前端：Dashboard 核心配置增加输出模式选择器,在 Dashboard 首页 `ModelSwitcher` 中新增 “App 输出模式” 下拉（xml_plaintext/raw_passthrough/auto），并调用 `getLlmAppConfig/upsertLlmAppConfig` 进行读取/保存。,切换后立即持久化并提示成功；刷新页面后仍为已保存值；保存失败有明确提示且不写入 localStorage 影子状态。,本地启动前后端后在 Dashboard 首页切换并刷新验证；抓包确认请求命中 `/llm/app/config`。,functions:apply_patch;functions:shell_command,DONE,TODO,DONE,web/src/components/dashboard/ModelSwitcher.vue;web/src/api/index.js,依赖现有 /llm/app/config 权限与返回格式,DONE：Dashboard 首页已可切换与持久化；pnpm -C web build 通过。
A3,文档/契约：默认值与语义对齐,更新 API 合约/说明中关于 `result_mode` 的默认值与解释（默认 raw_passthrough；xml_plaintext 为“纯文本含 XML 标签”）。,文档中不再宣称默认 xml_plaintext；并明确两种模式对应的 SSE 事件类型。,阅读校对 +（可选）用 curl 示例验证与文档一致。,functions:apply_patch;functions:shell_command,DONE,TODO,DONE,docs/api-contracts/api_gymbro_cloud_app_min_contract.md;docs/sse/WEB_DEBUG.md,依赖现有 SSE 事件协议文档,DONE：合约默认值描述已对齐实现。
A4,测试：修正受默认值变化影响的用例（如有）,如现有测试依赖默认 xml_plaintext，则改为显式传 `result_mode` 或先写入 `default_result_mode` 配置后再断言。,CI/本地测试通过且断言语义清晰（不再隐含依赖默认值）。,运行 `make test` 并定位失败用例逐一修正。,functions:apply_patch;functions:shell_command,DONE,TODO,DONE,tests/test_sse_output_modes_e2e.py,依赖 pytest fixtures 与 SQLite 初始化,DONE：相关用例已显式传 result_mode/隔离 uid；make test 通过。
