ID,Title,Description,Acceptance,Test_Method,Tools,Dev_Status,Review1_Status,Regression_Status,Files,Dependencies,Notes
A1,后端：Prompt 组装总开关 SSOT,新增 llm_app_settings.prompt_mode（server/passthrough），并在 /api/v1/messages 与 /api/v1/agent/runs 强制按 Dashboard 配置执行 skip_prompt（默认 server）。,prompt_mode=server 时请求不再走 passthrough；prompt_mode=passthrough 时允许透传；与 default_result_mode 同表存储且读取生效。,本地调用 /llm/app/config 切换后分别创建消息与 agent run 验证 skip_prompt 行为。,feedback:codebase-retrieval;functions:apply_patch;functions:shell_command,TODO,TODO,TODO,app/api/v1/llm_models.py;app/api/v1/messages.py;app/api/v1/agent_runs.py,依赖 llm_app_settings 表与 /llm/app/config API,待验证。
A2,前端：Dashboard Prompt 模式持久化,PromptSelector 读取/写入 /llm/app/config 的 prompt_mode，移除 localStorage 影子状态。,切换后立即持久化；刷新仍保持；失败有提示且回滚。,启动前后端后在 Dashboard PromptSelector 切换并刷新验证。,functions:apply_patch;functions:shell_command,TODO,TODO,TODO,web/src/components/dashboard/PromptSelector.vue;web/src/api/index.js,依赖 /llm/app/config 权限与返回格式,待验证。
A3,文档：App 最小契约补充 prompt_mode,补充 llm_app_settings.prompt_mode 语义说明（server/passthrough）。,文档明确 prompt_mode 为 SSOT 且默认 server。,阅读校对与简单一致性检查。,functions:apply_patch;functions:shell_command,TODO,TODO,TODO,docs/api-contracts/api_gymbro_cloud_app_min_contract.md,依赖 llm_app_settings 配置生效,待验证。
