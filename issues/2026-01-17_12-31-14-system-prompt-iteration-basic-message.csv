ID,Title,Description,Acceptance,Test_Method,Tools,Dev_Status,Review1_Status,Regression_Status,Files,Dependencies,Notes
PROMPT-001,创建 docs/prompt 目录和基线版本,创建迭代目录并复制当前 serp_prompt.md 为 v1.0_baseline.md,目录存在且基线文件字符数已统计,ls docs/prompt && wc -c docs/prompt/v1.0_baseline.md,Bash,DONE,DONE,DONE,docs/prompt/v1.0_baseline.md,,v1.0=4627 bytes
PROMPT-002,运行基线测试记录通过率,使用 real_ai_conversation_e2e.py 测试 xai/deepseek 基线通过率,测试结果记录到 docs/prompt/test_results.md,python scripts/monitoring/real_ai_conversation_e2e.py --models xai deepseek --runs 3,Bash,DONE,DONE,DONE,docs/prompt/test_results.md,PROMPT-001,test_results.md 已更新
PROMPT-003,v2.0 压缩冗余说明,去除重复约束和过度解释 目标压缩 20%+,字符数较基线减少 ≥20%,wc -c docs/prompt/v2.0_compress.md,codebase-retrieval,DONE,DONE,DONE,docs/prompt/v2.0_compress.md,PROMPT-001,已归档
PROMPT-004,v2.0 逐模型测试,测试 v2.0 在 xai/deepseek 的通过率,xai/deepseek 均 100% PASS,python scripts/monitoring/real_ai_conversation_e2e.py --models xai deepseek --runs 3,Bash,DONE,DONE,DONE,docs/prompt/test_results.md,PROMPT-003,已归档
PROMPT-005,v3.0 结构优化,前置核心约束后置示例 进一步压缩 10%+,字符数较 v2.0 减少 ≥10%,wc -c docs/prompt/v3.0_structure.md,codebase-retrieval,DONE,DONE,DONE,docs/prompt/v3.0_structure.md,PROMPT-003,已归档
PROMPT-006,v3.x 逐模型验证微调,针对各模型测试 v3.0 并微调,所有模型 100% PASS,python scripts/monitoring/real_ai_conversation_e2e.py --models xai deepseek --runs 5,Bash,DONE,DONE,DONE,docs/prompt/v3.1_enforce.md,PROMPT-005,已归档
PROMPT-007,v4.0 最小公约版本,综合所有模型反馈确定最小公约版本,所有模型使用同一版本 100% PASS,python scripts/monitoring/real_ai_conversation_e2e.py --runs 5 --turns 2,Bash,DONE,DONE,DONE,docs/prompt/v4.0_unified.md,PROMPT-006,已归档
PROMPT-008,v5.0 最终生产版本,最终版本通过全部模型 100% 测试,--runs 5 --turns 2 全部 PASS,python scripts/monitoring/real_ai_conversation_e2e.py --runs 5 --turns 2,Bash,DONE,DONE,DONE,docs/prompt/v5.0_production.md,PROMPT-007,已归档
PROMPT-009,更新 serp_prompt.md 和版本号,将最终版本更新回 SSOT 并更新 standard_serp_v2.json 版本号,assets/prompts/serp_prompt.md 内容与 v5.0 一致,diff docs/prompt/v5.0_production.md assets/prompts/serp_prompt.md,codebase-retrieval,DONE,DONE,DONE,assets/prompts/serp_prompt.md assets/prompts/standard_serp_v2.json,PROMPT-008,当前 SSOT 已升级到 v6.0.0
PROMPT-010,创建 CHANGELOG 和归档文档,记录完整迭代历史和字符压缩比,CHANGELOG.md 包含所有版本记录,cat docs/prompt/CHANGELOG.md,Bash,DONE,DONE,DONE,docs/prompt/CHANGELOG.md,PROMPT-009,已补齐 v6.0 记录
PROMPT-011,v6.0 稳定性版本 deepseek+claude-sonnet,修复 deepseek 的重复标签与 serp_queries 位置问题 并验证 claude-sonnet 通过,assets/prompts/serp_prompt.md 与 docs/prompt/v6.0_deepseek_stable.md 一致 且 xai/deepseek/claude-sonnet runs=3 turns=1 全 PASS,python scripts/monitoring/real_ai_conversation_e2e.py --models xai deepseek claude-sonnet --runs 3 --turns 1,Bash,DONE,DONE,DONE,docs/prompt/v6.0_deepseek_stable.md assets/prompts/serp_prompt.md docs/prompt/test_results.md docs/prompt/CHANGELOG.md assets/prompts/standard_serp_v2.json,PROMPT-008,"禁止代码块与复述模板；serp_queries 强制在 <final> 内三行无缩进; E2E=SUMMARY total=9 passed=9 failed=0 models=xai,deepseek,claude-sonnet runs=3 turns=1"
PROMPT-012,v7.0 去代码围栏（claude-sonnet）,移除 prompt 中的代码围栏字面量与示例 以降低 claude-sonnet 把整段 XML 包进代码块的概率 并升级 profile 版本,assets/prompts/serp_prompt.md 与 docs/prompt/v7.0_claude_no_code_fence.md 一致 且 standard_serp_v2.json version=7.0.0 且 claude-sonnet JWT E2E 可通过,.venv-wsl/bin/python scripts/monitoring/daily_mapped_model_jwt_e2e.py --models claude-sonnet,Bash,DONE,DONE,DONE,docs/prompt/v7.0_claude_no_code_fence.md assets/prompts/serp_prompt.md assets/prompts/standard_serp_v2.json docs/prompt/test_results.md docs/prompt/CHANGELOG.md app/services/ai_service.py tests/test_sse_output_modes_e2e.py scripts/monitoring/local_mock_ai_conversation_e2e.py scripts/monitoring/daily_mapped_model_schedule_check.py app/api/v1/dashboard.py,PROMPT-011,"claude-sonnet SSE 输出已无外层代码围栏；default_result_mode 建议设为 auto；deepseek 当前端点 472（非 prompt）"
PROMPT-013,v7.1 讨论规范场景稳定性,避免模型在回答“system prompt/规范/协议”类问题时复述规则导致非法标签或 </final> 后继续输出,1) assets/prompts/serp_prompt.md 与 docs/prompt/v7.1_final-tail-guard.md 一致 2) claude-sonnet 在 prompt_text=“继续迭代system prompt...”时 ThinkingML 校验通过,.venv/bin/python scripts/monitoring/daily_mapped_model_jwt_e2e.py --models claude-sonnet --prompt-text \"继续迭代system prompt...\" && .venv/bin/python scripts/monitoring/real_ai_conversation_e2e.py --models claude-sonnet --runs 1 --turns 1 && .venv/bin/python -m pytest -q tests/test_sse_output_modes_e2e.py,Bash,DONE,DONE,DONE,docs/prompt/v7.1_final-tail-guard.md assets/prompts/serp_prompt.md assets/prompts/standard_serp_v2.json docs/prompt/CHANGELOG.md docs/prompt/test_results.md app/services/ai_service.py tests/test_sse_output_modes_e2e.py,PROMPT-012,"E2E=ok（讨论规范 prompt_text）+ SSE 端到端：`</final>` 后丢弃与未知标签/ParsingError marker 转义；pytest test_sse_output_modes_e2e.py=13 passed"
PROMPT-014,v7.3 SERP 必须 + Meta 兜底,在“讨论 system prompt/规则/XML/实现细节”场景下防止 claude-sonnet 复述 prompt/漏 serp_queries：强化 prompt 规则并增加可复现的 E2E 参数,1) assets/prompts/serp_prompt.md 与 docs/prompt/v7.3_gymbro-serp-must-meta-guard.md 一致 2) standard_serp_v2.json version=7.3.0 3) claude-sonnet meta 场景 turns=2 PASS 4) local_mock_e2e PASS,.venv/bin/python scripts/monitoring/real_ai_conversation_e2e.py --models claude-sonnet --runs 1 --turns 2 --prompt-text \"<meta>\" && .venv/bin/python scripts/monitoring/local_mock_ai_conversation_e2e.py,Bash,DONE,DONE,DONE,docs/prompt/v7.3_gymbro-serp-must-meta-guard.md assets/prompts/serp_prompt.md assets/prompts/standard_serp_v2.json scripts/monitoring/real_ai_conversation_e2e.py docs/prompt/CHANGELOG.md docs/prompt/test_results.md,PROMPT-013,"deepseek 端点 472（非 prompt）；新增 real_ai_conversation_e2e.py --prompt-text 便于回归 meta 场景"
