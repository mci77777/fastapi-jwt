ID,Title,Description,Acceptance,Test_Method,Tools,Dev_Status,Review1_Status,Regression_Status,Files,Dependencies,Notes
P1,定义 Patch JSON 契约,确定增量 JSON 的 SSOT 结构（baseVersion/added/updated/deleted）与合并规则（updated 按 id 部分字段覆盖；合并后整体验证）。,Patch 输入结构清晰且可被后端解析；updated 仅覆盖提供字段；baseVersion 冲突可检测。,新增/调整 pytest 用例覆盖部分字段更新与 baseVersion 冲突。,feedback:codebase-retrieval;functions:apply_patch;functions:exec_command,TODO,TODO,TODO,app/services/exercise_library_service.py,P0,保持 KISS：不引入复杂 DSL。
P2,后端：Patch apply + publish,在 ExerciseLibraryService 实现 apply_patch_and_publish：读取最新快照 payload → 应用 added/updated/deleted → 校验 → publish 新版本。,发布后 version 单调递增；full 与 updates 反映变更；非法 patch 返回明确错误。,pytest：新增/更新/删除/冲突/非法字段覆盖。,feedback:codebase-retrieval;functions:apply_patch;functions:exec_command,TODO,TODO,TODO,app/services/exercise_library_service.py,P1,更新后必须通过 ExerciseDto 校验与枚举合法性。
P3,后端：admin patch API,新增 admin-only 端点 POST /api/v1/admin/exercise/library/patch 并接入 apply_patch_and_publish；权限与现有 publish 保持一致。,非 admin 403；admin 可发布 patch；baseVersion 冲突 409。,pytest：权限门禁 + 409 冲突用例。,feedback:codebase-retrieval;functions:apply_patch;functions:exec_command,TODO,TODO,TODO,app/api/v1/admin_exercise_library.py,P2,错误码需可被 Dashboard 直接提示。
P4,前端：Dashboard 增量更新 Tab,在官方库种子发布页增加增量更新 Tab：JSON 粘贴/上传、预览 added/updated/deleted 数量与样例、点击发布。,admin 可在 Dashboard 完成增量发布；非 admin 不显示发布按钮。,cd web && npm run build；admin 登录冒烟：发布成功后 meta 刷新。,feedback:codebase-retrieval;functions:apply_patch;functions:exec_command,TODO,TODO,TODO,web/src/views/exercise/library/seed/index.vue,P3,UI 保持简洁：先 JSON 驱动 + 预览。
P5,文档与回归,更新 docs/后端方案 与 task 文档，补充 patch JSON 示例与注意事项；回归现有 meta/updates/full。,文档可直接复制示例 JSON 使用；现有接口回归不破坏。,pytest + web build + 部署冒烟：/api/v1/exercise/library/meta 200。,functions:apply_patch;functions:exec_command,TODO,TODO,TODO,docs/后端方案/动作库-种子数据库scheme-后端须知.md;docs/archive/task/2026-01-02_exercise-library-seed-sync.md,P4,保持 SSOT 单一路径：以 assets/exercise 为准。
